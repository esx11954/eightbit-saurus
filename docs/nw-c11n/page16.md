---
sidebar_position: 16
---

# 15. 仮想化と自動化

<details>
    <summary>概要</summary>
    <div>

## 仮想化

### 定義

仮想化とは、物理的な一台のコンピュータのリソース（CPU、メモリ、ストレージなど）を、論理的に分割・抽象化し、その上で複数の仮想的なコンピュータを動作させる技術です。

---

### 仮想化技術3方式

| 比較項目 | ホストOS型| ハイパーバイザ型 | コンテナ型仮想化 |
| :--- | :--- | :--- | :--- |
| **別名/分類** | アプリケーション型 | **ベアメタル型 (Bare-Metal)** | **OSレベル仮想化** |
| **構造** | 既存OS上にアプリとして動作 | **物理ハードウェア上で直接動作** | ホストOSのカーネルを共有 |
| **ゲストOSの有無** | **必要** (各VMが独立したOSを持つ) | **必要** (各VMが独立したOSを持つ) | **不要** (ホストOSのカーネルを利用) |
| **リソース効率** | 低い (ホストOSとゲストOSの両方でリソース消費) | 標準 (ゲストOS分の消費あり) | **極めて高い** (軽量・カーネル共有) |
| **パフォーマンス** | 低い (既存OSを経由するため遅延が発生) | **非常に高い** (ハードウェアに近いため高速) | **最も高い** (ネイティブ実行に近い) |
| **隔離性/セキュリティ** | 標準 | **最も高い** (OSレベルで完全に分離) | 標準 (カーネルを共有するため) |
| **起動時間** | 数十秒 | 数秒〜数十秒 | **ミリ秒単位** (超高速) |
| **主な用途** | 開発、検証、個人利用、学習環境 | **データセンター、クラウド基盤 (IaaS)** | **アプリケーション開発・実行 (PaaS)** |
| **代表例** | VirtualBox, VMware Workstation | VMware ESXi, Microsoft Hyper-V | **Docker, Kubernetes** |

### 共通するメリット

  * **リソース効率の向上:** 物理サーバーの使用率が上がり、リソースの無駄が減ります。
  * **コスト削減:** 物理的な機器の購入費や設置スペース、電力コストを削減できます。
  * **柔軟性:** サーバーの増設や移動が容易になります。

-----

## クラウドコンピューティング

### 定義

クラウドコンピューティングとは、この**仮想化技術を基盤**とし、サーバー、ストレージ、データベース、ソフトウェアなどのITリソースを、**インターネット経由でオンデマンドに提供するサービス形態**です。

### 特徴

  * **オンデマンド提供:** 必要な時に、必要な分だけリソースをすぐに利用・増減できます。
  * **従量課金制:** 使用した分だけ料金を支払うモデル（初期投資が不要）。
  * **高いスケーラビリティ:** 急なトラフィック増加などにも、柔軟に対応してリソースを自動的に拡張できます。

-----

### クラウドのサービスモデル（責任範囲）

クラウドサービスは、提供される機能の範囲によって、大きく以下の3つのモデルに分類されます。  
これは、「どこまでをクラウド事業者が担当し、どこからをユーザーが担当するか」という責任の範囲の違いを示しています。

| モデル | 略称 | 提供されるサービス | ユーザーの主な責任範囲 | 例 |
| :--- | :--- | :--- | :--- | :--- |
| **SaaS**<br />(Software as a Service) | サース | **完成されたソフトウェア** | データの利用、設定 | Gmail, Microsoft 365, Salesforce |
| **PaaS**<br />(Platform as a Service) | パース | **アプリケーション実行環境**（OS、ミドルウェアまで） | アプリケーション開発、データの管理 | AWS Lambda, Google App Engine |
| **IaaS**<br />(Infrastructure as a Service) | イアース | **インフラストラクチャ**（サーバー、ストレージ、ネットワーク） | OS、ミドルウェア、アプリケーションのすべて | Amazon EC2, Azure Virtual Machines |

<iframe src="https://drive.google.com/file/d/1M7we0GpVG0IMRPVLoK5mh5xvikxiLuxF/preview" width="640" height="360" allow="fullscreen"></iframe>
　
## 自動化とプログラマビリティ

| 概念 | 定義 | 役割 |
| :--- | :--- | :--- |
| **プログラマビリティ**<br />(Programmability) | ネットワーク機器を**ソフトウェア**を通じて操作・制御できる能力。 | **自動化を実現するための基盤**。 |
| **自動化**<br />(Automation) | プログラマビリティを利用して、人間の介入なしに**タスクを自動で実行**すること。 | **最終的な目標**。手作業による運用からの脱却。 |

簡単に言えば、「プログラマビリティ」はルーターやスイッチに「**プログラムで操作されるための窓口がある状態**」を指し、「自動化」はその窓口を使って「設定変更や監視を効率的に行うこと」を指します。

-----

## 従来の管理との違い

従来のネットワーク管理は機器ごとにログインし、CLIでコマンドを**手動で入力**していました。

| 項目 | 従来の管理 (CLI) | 自動化された管理 (API/プログラマビリティ) |
| :--- | :--- | :--- |
| **操作方法** | **手動**（CLIで1台ずつ） | **ソフトウェア**（プログラムでまとめて） |
| **効率性** | 低い（時間と労力がかかる） | **高い**（迅速、スケール可能） |
| **正確性** | 低い（人的ミスが発生しやすい） | **非常に高い**（ミスが少ない） |

-----

## 自動化を実現する主要技術

プログラマビリティは、以下の技術を通じて具体的に実現されます。

### API (Application Programming Interface)

「ソフトウェア操作の窓口」です。  
プログラムがネットワーク機器やコントローラに対して設定や情報取得を要求するための明確なインターフェースを提供します。
  * **RESTCONF/NETCONF:** ネットワーク設定と管理のために設計されたAPIプロトコルで、データモデルとして**YANG**を使用します。

### データモデル (YANG)

ネットワーク機器の構造や設定項目を**標準化されたデータ形式**で定義したものです。

  * 従来のCLIのように「コマンドの羅列」ではなく、設定を構造化されたデータ（JSONやXML）として扱うことで、プログラムからの操作を容易にします。

### 自動化ツール

APIを利用して実際にタスクを実行するためのツールや言語です。

  * **Python:** ネットワーク自動化で最も広く使われるプログラミング言語。
  * **Ansible / Terraform:** 設定の展開や構成管理を自動化するためのツール（オーケストレーション）。

## 自動化とプログラマビリティのメリット

  * **スピードの向上:** 数百台の機器への設定変更やファームウェア更新を、数分で完了できます。
  * **一貫性の確保:** 設定のばらつきや人的ミスを排除し、ネットワークの品質を均一化します。
  * **運用のシンプル化:** 複雑なタスクをプログラムに任せることで、管理者はより戦略的な業務に集中できるようになります。

-----

## ネットワークコントローラとは

ネットワークにおけるコントローラとは、**ネットワーク全体を中央で集中管理・制御するためのソフトウェアプラットフォーム**です。

これは従来のように管理者がルーターやスイッチ一台一台にログインして設定を行う**分散制御モデル**から**集中制御モデル**への移行を可能にする、**SDN**（Software-Defined Networking）の中核となる要素です。

### 分散制御と集中制御

| 項目 | 従来の管理（分散制御） | コントローラによる管理（集中制御） |
| :--- | :--- | :--- |
| **設定方法** | 管理者が機器個別にCLI（コマンド）を投入 | コントローラがAPI経由で全体に設定を展開 |
| **知識** | 機器の機種、OS、コマンドの知識が必要 | ネットワーク全体の意図のみを定義 |
| **運用負荷** | 高い（手作業、ミスが発生しやすい） | **低い**（自動化、一貫性が高い） |

-----

## コントローラの役割とSDNの3つのプレーン

SDNでは、ネットワークの機能を以下の3つの層（プレーン）に分離して考えます。  
コントローラは、このうち**制御プレーン**と**管理プレーン**を担います。

| プレーン | 役割 | 担当主体 |
| :--- | :--- | :--- |
| **管理プレーン**<br />(Management Plane) | 設定、監視、自動化、分析 | **コントローラ** |
| **制御プレーン**<br />(Control Plane) | パケットの転送経路の計算、制御情報の配布 | **コントローラ** |
| **データプレーン**<br />(Data Plane) | 実際にパケットを転送する処理 | **ルーターやスイッチなどの物理機器** |

### コントローラの具体的な機能

コントローラは、以下の機能を通じてネットワーク運用を劇的に改善します。

1.  **APIの提供:** プログラム（Pythonなど）から設定変更や情報取得を可能にする**窓口（REST API）を提供します。これがプログラマビリティ**の実現手段です。
2.  **トポロジの把握:** ネットワーク全体の接続状態を常に把握し、**一元的なマップ**を提供します。
3.  **自動化エンジンの実行:** 定期的な設定バックアップ、ファームウェア更新、ポリシー展開などを**自動実行**します。
4.  **インサイトの提供:** 収集したトラフィックやログを分析し、**障害の根本原因**やパフォーマンスの問題を自動で特定し、管理者に提示します。

### 代表的なコントローラ

  * **Cisco DNA Center:** キャンパスネットワークやWAN（SD-WAN）の集中管理、セキュリティポリシーの展開、ネットワーク保証機能を提供します。
  * **SD-WANコントローラ:** 拠点間の接続回線（MPLS、インターネットなど）をアプリケーションの要件に応じて自動選択・制御します。
　
<iframe src="https://drive.google.com/file/d/1WGmVoNGdbdQMsvgO5J0QqTHNR-uucm1k/preview" width="640" height="360" allow="fullscreen"></iframe>

　

    </div>
</details>

<details>
    <summary>確認問題</summary>
    <div>
以下のファイルをダウンロードし、回答を記入して担当講師に送信して下さい。

[**確認問題**](./files/16.仮想化と自動化_確認課題_名前.xlsx)
    </div>
</details>