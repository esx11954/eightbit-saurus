---
sidebar_position: 13
---

# 12. 冗長化

<details>
    <summary>概要</summary>
    <div>
## 冗長化技術：必要性

ネットワークにおける**冗長化**（Redundancy）とは、ケーブルや機器に障害が発生した場合でも、通信が途絶えることなくサービスを継続させるための設計技術です。  
これは、システムの**高可用性**（High Availability / HA）を確保するためのネットワークの「保険」となります。

ネットワークの冗長化は、主に**経路**（L2）、**ゲートウェイ**（L3）、**リンク**（L1/L2）の三つのレイヤで対策が講じられます。

---

## 経路冗長化（L2）：STP/RSTP

スイッチング環境では信頼性を高めるために複数のケーブルを接続しますが、この多重接続はそのままでは**ループ**を引き起こし、ブロードキャストストームやMACアドレスフラッピングという致命的な障害につながります。

### STP (Spanning Tree Protocol)
STP（IEEE 802.1D）の役割は、物理的な多重接続を維持しつつ、**論理的にループを遮断する**ことです。

* **仕組み:** スイッチ間でBPDUを交換し、冗長な経路のポートを**ブロッキング状態**にします。
* **RSTP:** 従来のSTPの収束時間（約30〜50秒）を大幅に短縮し、数秒以内に経路の切り替え（フェイルオーバー）を可能にした改良規格、IEEE 802.1wです。

---

## ゲートウェイ冗長化（L3）：FHRP

PCなどの端末が外部へ通信するために利用する**デフォルトゲートウェイ**（ルーター）は、単一障害点（SPoF）になりがちです。  
ルーターに障害が発生した場合に備えて、複数のルーター間で冗長化を図る技術を**FHRP** (First Hop Redundancy Protocols)と呼びます。

### HSRPとVRRP
* **仕組み:** 複数のルーターが**仮想IPアドレス**と**仮想MACアドレス**を共有し、一つのグループを形成します。
* **動作:** グループ内で**アクティブ機**と**スタンバイ機**を選出します。  
アクティブ機に障害が発生すると、スタンバイ機が自動で仮想アドレスを引き継ぎ、通信を継続させます。
* **プロトコル:**
    * **HSRP (Hot Standby Router Protocol):** Cisco独自の規格。
    * **VRRP (Virtual Router Redundancy Protocol):** 標準規格。


---

## リンクレベルの冗長化と帯域拡大

物理ケーブルやポートの障害に備えつつ、利用可能な帯域幅を増加させる技術です。

### EtherChannel / LAG (Link Aggregation Group)
* **目的:** 複数の物理的なケーブルを**論理的に1本の太いリンク**として扱います。
* **効果:** 束ねたケーブルのうち1本が切断されても、残りのケーブルで通信が維持されるため、**リンクレベルの冗長性**を確保します。  
同時に複数のケーブル間で負荷分散を行うため、**帯域幅の拡大**にも貢献します。

---

## 機器レベルの冗長化

ファイアウォール、ロードバランサー、サーバーなど、ネットワークの重要な機能を提供する機器自体も冗長化されます。

### Active/Standby 構成
最も一般的な構成です。現用機と待機機の2台をペアで運用します。  
通常、設定やセッション情報は常に同期されており、Active機に障害が発生すると瞬時にStandby機が処理を引き継ぎ、サービスを継続させます。

### 冗長化のトレードオフ
冗長化はシステムの信頼性を劇的に向上させますが、**コスト**と**複雑性**（STPやFHRPの設定・管理）が増加するというトレードオフがあります。  
したがって、システムの重要度に応じて適切なレベルの冗長化設計を行う必要があります。
　
<iframe src="https://drive.google.com/file/d/10b35Ejz3Gw7woat1QBQfQo7Gdf4HfTIC/preview" width="640" height="360" allow="fullscreen"></iframe>

　

    </div>
</details>

<details>
    <summary>確認問題</summary>
    <div>
以下のファイルをダウンロードし、回答を記入して担当講師に送信して下さい。

[**確認問題**](./files/13.Etherchannel・FHRP_確認課題_名前.xlsx)
    </div>
</details>