---
sidebar_position: 1
---

# リレーショナルデータベースとは

## 1-1. データベースの基本概念

私たちの身近なところにあるデータベースを例に説明していきましょう。  
たとえば、コンビニエンスストアのPOSシステムを想像してください。

### データベースが必要な理由

コンビニには以下のようなデータを管理する必要があります：

- 商品の在庫数
- 売上情報
- 顧客の購買履歴
- 従業員のシフト管理

これらのデータを Excel のような表計算ソフトで管理しようとすると、以下のような問題が発生します：

- 複数人が同時に更新できない
- データの整合性が保てない
- 大量のデータを素早く検索できない
- データの関連付けが難しい

### リレーショナルデータベースの特徴

リレーショナルデータベースは、これらの問題を解決するために以下のような特徴を持っています：

1. データを表（テーブル）として管理
   - 行（レコード）と列（フィールド）で構成
   - 例：商品テーブル、売上テーブル、顧客テーブル

2. テーブル間の関連付け
   - 主キー（Primary Key）と外部キー（Foreign Key）による関連付け
   - 例：商品コードで商品テーブルと売上テーブルを紐付け

3. データの一貫性保持
   - トランザクション管理
   - 同時実行制御
   - 整合性制約

## 1-2. リレーショナルデータベースの利点

### 1. データの独立性
- プログラムとデータを分離して管理
- データ構造を変更してもプログラムへの影響を最小限に抑制

### 2. データの整合性
- 不整合なデータの登録を防止
- 例：存在しない商品コードの売上データは登録不可

### 3. 同時実行制御
- 複数ユーザーが同時にデータにアクセス可能
- データの整合性を保ちながら並行処理を実現

### 4. セキュリティ管理
- ユーザーごとにアクセス権限を設定
- データの不正アクセスを防止

## 1-3. 実際のデータ管理例

コンビニエンスストアの在庫管理を例に、具体的なテーブル設計を見てみましょう。  
以下のコマンドは、テーブルを作成する**SQL文**と呼ばれるものです。  
現時点では、具体的な書き方を覚える必要はありませんが、データがどのように構造化されているかをイメージするために参考にしてください。

```sql
-- 商品テーブルの作成
CREATE TABLE 商品 (              -- CREATE TABLE：テーブルを作成するコマンド
    商品コード NUMBER PRIMARY KEY,  -- NUMBER：数値を格納できる列
                                   -- PRIMARY KEY：一意の識別子となる列
    商品名 VARCHAR2(100),          -- VARCHAR2(100)：最大100文字の文字列を格納できる列
    単価 NUMBER,
    カテゴリ VARCHAR2(50)
);

-- 在庫テーブルの作成
CREATE TABLE 在庫 (
    商品コード NUMBER REFERENCES 商品(商品コード),  -- REFERENCES：他のテーブルを参照する列
    店舗コード NUMBER,
    在庫数 NUMBER,
    PRIMARY KEY (商品コード, 店舗コード)           -- 複数の列を組み合わせて一意の識別子とする
);

-- 売上テーブルの作成
CREATE TABLE 売上 (
    売上番号 NUMBER PRIMARY KEY,
    商品コード NUMBER REFERENCES 商品(商品コード),
    販売日時 TIMESTAMP,                           -- TIMESTAMP：日付と時刻を格納できる列
    販売数量 NUMBER,
    販売金額 NUMBER
);
```

このような構造により：
- 商品情報は商品テーブルで一元管理
- 在庫数は店舗ごとに管理
- 売上情報は時系列で記録
- テーブル間は商品コードで関連付け

### テーブル間の関連付けについて

上記のテーブル設計では、以下のような関連付けが行われています：

1. 商品テーブルと在庫テーブルの関係
   - 在庫テーブルの商品コードは、商品テーブルの商品コードを参照
   - これにより、存在しない商品の在庫データは登録できない

2. 商品テーブルと売上テーブルの関係
   - 売上テーブルの商品コードは、商品テーブルの商品コードを参照
   - これにより、存在しない商品の売上データは登録できない

以上がリレーショナルデータベースの基本概念についての説明です。