# 標準API

## 1. はじめに  

Javaアプリケーションを開発する上で、Java標準APIの理解は不可欠です。  
Java標準APIとは、Java開発キット (JDK) に含まれる、あらかじめ用意されたクラスやインターフェースの集まりです。  
これらは、ファイル操作、ネットワーク通信、データ構造の利用、日付時刻の処理など、様々な汎用的な機能を提供します。  

## 2. Java標準APIの概要  

Java標準APIは、機能ごとにパッケージに分類されています。  
これにより、関連するクラスやインターフェースがまとめられ、開発者は目的の機能を見つけやすくなっています。  

以下に主要なパッケージとその役割、代表的なクラス/インターフェースをまとめます。  

| パッケージ名       | 役割                                                         | 代表的なクラス/インターフェース                          |
| :----------------- | :----------------------------------------------------------- | :------------------------------------------------------- |
| `java.lang`        | Java言語の最も基本的なクラスを提供します。  明示的な`import`文なしで利用できます。  | `Object`, `String`, `System`, `Math`, ラッパー型 (`Integer`など)  |
| `java.util`        | ユーティリティクラス、コレクションフレームワーク、日付/時刻関連の古いAPIを提供します。  | `List`, `Set`, `Map`, `Date`, `Calendar`, `Random`, `Scanner`  |
| `java.io`          | ストリームベースの入出力 (I/O) 操作 (ファイル、ネットワークなど) を提供します。  | `InputStream`, `OutputStream`, `Reader`, `Writer`, `File`  |
| `java.nio`         | Java I/Oの代替となるチャネルベースのI/O (NIO: New I/O) を提供します。  高速な入出力や非同期I/Oに適しています。  | `Buffer`, `Channel`, `Path`, `Files`                     |
| `java.net`         | ネットワーク通信機能 (TCP/IPソケット、URL操作など) を提供します。  | `URL`, `URLConnection`, `Socket`, `ServerSocket`         |
| `java.time`        | Java 8で導入された、新しくモダンな日付と時刻のAPIを提供します。  推奨される日付/時刻操作APIです。  | `LocalDate`, `LocalTime`, `LocalDateTime`, `ZonedDateTime`, `Duration`, `Period`  |
| `java.sql`         | データベース接続 (JDBC: Java Database Connectivity) のためのAPIを提供します。  | `Connection`, `Statement`, `ResultSet`, `DriverManager`  |

## 3. 主要パッケージの深掘り  

ここでは、特に利用頻度の高いパッケージについて、もう少し詳しく見ていきます。  

### 3.1. `java.lang`パッケージ  

`java.lang`パッケージは、Javaプログラミングの根幹をなすクラス群を含んでいます。  
これらのクラスは、特別な`import`文を記述することなく利用できます。  

| クラス/インターフェース | 概要                                                         |
| :---------------------- | :----------------------------------------------------------- |
| `Object`                | 全てのJavaクラスの最上位に位置するスーパークラスです。  `equals()`, `hashCode()`, `toString()`などの基本的なメソッドを提供します。  |
| `String`                | 文字列を表すクラスです。  Javaでは文字列は不変 (immutable) オブジェクトとして扱われます。  |
| `System`                | システムリソースや標準入出力 (`System.out`, `System.err`, `System.in`) へのアクセスを提供します。  |
| `Math`                  | 数学的な計算 (平方根、指数、三角関数など) を行うための静的メソッドを提供します。  |
| ラッパー型              | プリミティブ型 (例: `int`, `double`, `boolean`) をオブジェクトとして扱うためのクラスです (`Integer`, `Double`, `Boolean`など)。  コレクションフレームワークなどでプリミティブ型を格納する際に使用されます。  |
| `Thread`                | スレッドを作成し、管理するためのクラスです。  マルチスレッドプログラミングの基本となります。  |

### 3.2. `java.util`パッケージ  

`java.util`パッケージは様々な汎用的なユーティリティクラスを提供しますが、特に重要なのは**コレクションフレームワーク**です。  

#### 3.2.1. コレクションフレームワーク  

データ構造を効率的に扱うためのAPI群です。  

| インターフェース | 概要                                                         | 代表的な実装クラス                                           |
| :--------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `List`           | 順序付けられた要素のコレクションです。  重複を許容します。  要素はインデックスでアクセスできます。  | `ArrayList` (高速なランダムアクセス), `LinkedList` (高速な要素の追加/削除)  |
| `Set`            | 重複しない要素のコレクションです。  順序は保証されません (一部実装を除く)。  | `HashSet` (高速な操作), `TreeSet` (要素をソートして保持)     |
| `Map`            | キーと値のペアを格納するコレクションです。  キーは一意である必要があります。  | `HashMap` (高速な操作), `TreeMap` (キーをソートして保持), `LinkedHashMap` (挿入順を保持)  |
| `Queue`          | 要素を処理するためのコレクションです。  一般的にFIFO (先入れ先出し) の原則に基づきます。  | `LinkedList`, `PriorityQueue`                                |

#### 3.2.2. その他のユーティリティ  

| クラス/インターフェース | 概要                                                         |
| :---------------------- | :----------------------------------------------------------- |
| `Scanner`               | 標準入力やファイル、文字列などからデータを読み込み、解析するためのクラスです。  |
| `Random`                | 乱数を生成するためのクラスです。                             |
| `Date`, `Calendar`      | 古い日付と時刻を扱うAPIです。  **`java.time`パッケージの使用が推奨されます。**  |
| `Collections`           | コレクションに対する静的ユーティリティメソッド (ソート、シャッフル、同期化など) を提供します。  |

### 3.3. `java.io`と`java.nio`パッケージ  

ファイルやネットワークからのデータの読み書きを行うためのAPIです。  
`java.io`はストリームベース、`java.nio`はチャネルベースで、より高性能なI/Oを提供します。  

| パッケージ/クラス       | 概要                                                         |
| :---------------------- | :----------------------------------------------------------- |
| `java.io`               |                                                              |
| └ `InputStream`/`OutputStream` | バイト単位のデータ (`byte[]`) を読み書きするための抽象クラスです。  |
| └ `Reader`/`Writer`       | 文字単位のデータ (`char[]`または`String`) を読み書きするための抽象クラスです。  文字コード変換を扱います。  |
| └ `BufferedReader`/`BufferedWriter` | バッファリングによってI/O操作のパフォーマンスを向上させるためのクラスです。  |
| └ `File`                | ファイルやディレクトリのパス名を抽象的に表現し、それらの操作 (作成、削除、名前変更など) を行います。  |
| `java.nio`              |                                                              |
| └ `Path`, `Paths`, `Files` | `java.io.File`に代わる、モダンなファイルシステム操作のためのAPIです。  パスの操作やファイルのコピー、移動、削除などをより直感的に行えます。  |
| └ `Buffer`, `Channel`   | より効率的なI/Oを行うためのコンポーネントです。  チャネルはI/Oソースとの接続を表し、バッファはデータを一時的に格納する領域です。  |

### 3.4. `java.time`パッケージ (Java 8以降の推奨API)  

Java 8で導入された新しい日付と時刻のAPIです。  
旧来の`java.util.Date`や`java.util.Calendar`に比べて、不変性、明確な命名、拡張性といった点で優れています。  

| クラス/インターフェース | 概要                                                         |
| :---------------------- | :----------------------------------------------------------- |
| `LocalDate`             | 日付 (年、月、日) のみを表現します。  タイムゾーン情報を含みません。  |
| `LocalTime`             | 時刻 (時、分、秒、ナノ秒) のみを表現します。  タイムゾーン情報を含みません。  |
| `LocalDateTime`         | 日付と時刻の両方を表現します。  タイムゾーン情報を含みません。  |
| `ZonedDateTime`         | タイムゾーン情報を含む日付と時刻を表現します。  グローバルな日付/時刻の表現に適しています。  |
| `Instant`               | エポック (1970年1月1日00:00:00 UTC) からの経過時間をナノ秒精度で表現する「瞬時」の概念です。  マシンが理解しやすい形式です。  |
| `Duration`              | 秒やナノ秒単位で時間的な「長さ」を表現します。  |
| `Period`                | 年、月、日の単位で日付的な「長さ」を表現します。  |
| `DateTimeFormatter`     | 日付と時刻のフォーマット (文字列への変換) とパース (文字列からの変換) を行います。  |

**例:**  

```java showLineNumbers
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

public class TimeApiExample {
    public static void main(String[] args) {
        // 現在の日付を取得
        LocalDate today = LocalDate.now();
        System.out.println("今日の日付: " + today);  // 今日の日付: 2023-10-27

        // 特定の日付と時刻を作成
        LocalDateTime specificDateTime = LocalDateTime.of(2024, 1, 1, 10, 30);
        System.out.println("特定の日時: " + specificDateTime);  // 特定の日時: 2024-01-01T10:30

        // 日付をフォーマット
        DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy/MM/dd HH:mm:ss");
        String formattedDateTime = specificDateTime.format(formatter);
        System.out.println("フォーマットされた日時: " + formattedDateTime);  // フォーマットされた日時: 2024/01/01 10:30:00
    }
}
```  

## 4. Java 17における注目点 (標準API関連)  

Java 17は長期サポート (LTS) バージョンであり、安定性と信頼性が重視されています。  
これまでのJavaバージョンで導入されてきた言語機能が標準APIの利用に影響を与える点に注目しましょう。  

| 機能名             | JEP (Java Enhancement Proposal) | 概要                                                         | 標準APIへの影響                                              |
| :----------------- | :------------------------------ | :----------------------------------------------------------- | :----------------------------------------------------------- |
| Records            | JEP 395                         | データを透過的に保持するためだけのクラスを簡潔に定義できる言語機能です。  ボイラープレートコードを削減します。  | `java.lang.Record`クラスが基底クラスとなり、データモデルの記述が非常に簡潔になります。  特に不変なデータ転送オブジェクト (DTO) の作成に有用です。  |
| Sealed Classes     | JEP 409                         | クラスやインターフェースの継承 (または実装) を特定のクラス/インターフェースのみに制限できる言語機能です。  | API設計において、特定のサブタイプのみを許可する際に、より厳密な制御が可能になります。  APIの利用者を限定し、予期せぬ拡張を防ぐことに役立ちます。  |
| Pattern Matching for `switch` | JEP 406 (Preview), JEP 420 (Second Preview) | `switch`式や文で、型によるパターンマッチングが可能になります。  複雑な`instanceof`とキャストの連鎖を簡潔に記述できます。  | `java.lang.Object`などの汎用的な型を扱う際に、オブジェクトの型に応じた分岐処理をより簡潔かつ安全に記述できるようになります。  多型的な処理の可読性が向上します。  |

これらの新機能は、既存の標準API (特に`java.lang`以下のクラス) と組み合わせて使用することで、より簡潔で表現力豊かなコード記述が可能になります。  

## 5. 学習のポイント  

Java標準APIを効率的に学ぶためのポイントをいくつか紹介します。  

*   **JavaDocの活用**:  [公式のJavaDoc](https://docs.oracle.com/javase/jp/17/docs/api/index.html)は、各クラス、メソッド、フィールドの詳細な説明、パラメータ、戻り値、スローされる例外、使用例などが網羅された最も重要な情報源です。  
積極的に参照する習慣をつけましょう。  
*   **実践的なコード例**:  ただAPIの存在を知るだけでなく、実際にコードを書いて動かしてみることが重要です。  
様々なAPIを組み合わせることで、より深い理解が得られます。  
*   **よく使うAPIから覚える**:  全てのAPIを一度に覚える必要はありません。  
`java.lang`、`java.util.Collection Framework`、`java.io`/`java.nio.file`、`java.time`といった頻繁に使うAPIから習得し、徐々に範囲を広げていきましょう。  
*   **immutable (不変) の原則**:  特に`String`や`java.time`パッケージのクラスなど、不変なオブジェクトはJavaでよく利用されます。  
その特性 (一度作成したら内容が変更されない) を理解することが重要です。  

## 6. まとめ  

Java標準APIは、Java開発の基盤となる膨大なライブラリ群です。  

*   `java.lang`: 言語の基本。  
*   `java.util`: コレクションフレームワークとユーティリティ。  
*   `java.io`/`java.nio`: 入出力操作。  
*   `java.time`: モダンな日付時刻。  

など、それぞれのパッケージが特定の役割を担っています。  

Java 17では、RecordsやSealed Classesといった新しい言語機能が導入され、これらを標準APIと組み合わせて利用することで、よりモダンで保守性の高いコードを書くことが可能です。  
